<div class="container" data-controller="modal-image-carousel">
  <h1 class="mt-3"><%= @article.title %></h1>
  <p><%= @article.address %></p>
  <% if @article.pictures.count >= 5 %>
    <%= render "shared/grid_pictures", article: @article %>
  <% elsif @article.pictures.count >= 1 %>
    <%= render "shared/grid_pictures_#{@article.pictures.count}", article: @article %>
  <% end %>
  <!-- Modal -->
  <div class="modal" data-modal-image-carousel-target="modal" data-action="click->modal-image-carousel#modalClick">
    <div class="modal-center">
      <!-- Close button -->
      <span class="close" data-action="click->modal-image-carousel#closeClick">&times;</span>

      <!-- Modal content (image carousel) -->
      <div class="modal-content">
        <div class="swiper-container" data-controller="carousel"
                                      data-carousel-options-value='{
                                        "pagination": { "el": ".swiper-pagination",
                                                        "dynamicBullets": "true" },
                                        "navigation": { "nextEl": ".swiper-button-next",
                                                        "prevEl": ".swiper-button-prev"}}'>
          <div class="swiper-wrapper">
            <% @article.pictures.each do |picture| %>
              <div class="swiper-slide"><%= cl_image_tag picture.key %></div>
            <% end %>
          </div>

          <!-- Pagination (... or 1/10 or progress bar) -->
          <div class="swiper-pagination"></div>

          <!-- Navigation buttons (< >) -->
          <div class="swiper-button-prev"></div>
          <div class="swiper-button-next"></div>
        </div>
      </div>
    </div>

  </div>
  <div class="d-flex-show mt-3">
    <div class="col-flex show-col-left" style="height: 500px;">
    </div>
    <div class="col-flex show-col-right" data-controller="date-picker" data-date-picker-daily-rate-value="<%= @article.daily_rate %>">
      <%= form_for @booking, url: article_bookings_path(@article) do |f| %>
        <div data-date-picker-target="dates"></div>
        <input type="hidden" name="booking[start_date]" data-date-picker-target="start">
        <input type="hidden" name="booking[end_date]" data-date-picker-target="end">
        <br>
        <div class="d-flex px-2">
          <p class="mx-2 my-1">From</p>
          <p class="flex-grow-1 text-end mx-2 my-1" data-date-picker-target="from"></p>
        </div>
        <div class="d-flex px-2">
          <p class="mx-2 my-1">To</p>
          <p class="flex-grow-1 text-end mx-2 my-1" data-date-picker-target="to"></p>
        </div>
        <hr>
        <div class="d-flex px-2">
          <p class="mx-2 my-1">Number of full days</p>
          <p class="flex-grow-1 text-end mx-2 my-1" data-date-picker-target="days"></p>
        </div>
        <div class="d-flex px-2">
          <p class="mx-2 my-1">Daily rate</p>
          <p class="flex-grow-1 text-end mx-2 my-1">$ <%= @article.daily_rate %>.00</p>
        </div>
        <hr>
        <div class="d-flex px-2">
          <p class="mx-2 my-1"><b>Total</b></p>
          <p class="flex-grow-1 text-end mx-2 my-1" data-date-picker-target="total"><b></b></p>
        </div>

        <%= f.submit class: "btn btn-primary mt-2" %>
      <% end %>
    </div>
  </div>
</div>
